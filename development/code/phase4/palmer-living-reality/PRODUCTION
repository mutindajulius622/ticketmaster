ter name="content">
# Palmer Living Reality - Production Configuration Guide

## Quick Start for Production

### 1. Environment Setup

Copy the environment template and configure your production values:

```bash
cp .env.example .env
# Edit .env with your production values
```

### 2. Required Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `SECRET_KEY` | Flask secret key (generate with `python -c "import secrets; print(secrets.token_hex(32))"`) | Yes |
| `DATABASE_URI` | Database connection string | Yes |
| `MPESA_CONSUMER_KEY` | M-Pesa API consumer key | For payments |
| `MPESA_CONSUMER_SECRET` | M-Pesa API consumer secret | For payments |
| `MPESA_BUSINESS_SHORT_CODE` | M-Pesa paybill number | For payments |
| `MPESA_PASSKEY` | M-Pesa passkey | For payments |
| `MPESA_CALLBACK_URL` | Callback URL for M-Pesa | For payments |
| `MPESA_ENVIRONMENT` | `sandbox` or `production` | For payments |

### 3. Docker Deployment

```bash
# Build and start all services
docker-compose up -d --build

# View logs
docker-compose logs -f

# Stop services
docker-compose down
```

### 4. Manual Deployment

```bash
# Backend
cd server
pip install -r requirements.txt
python app.py

# Frontend (separate terminal)
cd client
npm install
npm run build
```

## Production Checklist

- [ ] Set strong `SECRET_KEY` in environment
- [ ] Configure production database (PostgreSQL recommended)
- [ ] Set `FLASK_ENV=production`
- [ ] Enable HTTPS and set `SESSION_COOKIE_SECURE=True`
- [ ] Configure M-Pesa credentials for live environment
- [ ] Update CORS settings for production domain
- [ ] Set up reverse proxy (nginx/Apache)
- [ ] Configure logging
- [ ] Set up monitoring and alerts
- [ ] Backup strategy for database

## Security Recommendations

1. **Never commit `.env` files to version control**
2. **Use HTTPS in production**
3. **Rotate secrets regularly**
4. **Limit database access**
5. **Enable firewall rules**
6. **Use fail2ban or similar for SSH**

## Monitoring

The application logs to:
- Docker: `docker-compose logs backend`
- File: Configure in `logging.basicConfig()`

## Troubleshooting

### Frontend not loading
```bash
# Ensure frontend is built
cd client && npm run build
```

### Database issues
```bash
# Reinitialize database
cd server
PYTHONPATH=.. python setup_db.py
```

### M-Pesa payments not working
- Verify credentials in `.env`
- Check `MPESA_ENVIRONMENT` is correct
- Verify callback URL is accessible
